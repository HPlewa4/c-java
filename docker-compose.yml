services:
  backend:
    build: ./backend
    ports:
      - "8080:8080"
    environment:
      - PORT=8080
      - MODELS_DIR=/app/models
    volumes:
      - ./backend/models:/app/models
    networks:
      - ml_net
    restart: unless-stopped

  frontend:
    build: ./frontend
    depends_on:
      - backend
    ports:
      - "6080:6080"
      - "5900:5900"
    environment:
      - DISPLAY=:1
      - SCREEN_RES=1280x800x24
      - VNC_PORT=5900
      - NOVNC_PORT=6080
      - BACKEND_URL=http://backend:8080
    networks:
      - ml_net
    restart: unless-stopped

networks:
  ml_net:
    driver: bridge
